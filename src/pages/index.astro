---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';

const allPosts = (await getCollection('blog')).sort(
  (a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf(),
);
---

<Layout
  meta={{
    title: 'Frank Stallone | Sharing 25 years of working on the web',
    description:
      'For the last two decades, I have helped businesses of all sizes craft compelling user experiences that drove 100M+ in revenue.',
  }}
>
  <section class="region wrapper flow prose">
    {
      allPosts.map((post) => (
        <div class="box flow prose">
          <h2>
            <a href={`/${post.collection}/${post.slug}`}>{post.data.title}</a>
          </h2>
          <p>
            <small
              class="uppercase step--2 font-weight-medium font-date tracking-l"
              style="color: var(--gray800);"
            >
              {new Date(post.data.publishDate).toLocaleDateString(undefined, {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric',
              })}
            </small>
          </p>
          <p>{post.data.description}</p>
          <p>
            <a href={`/${post.collection}/${post.slug}/`}>Read more &hellip;</a>
          </p>
        </div>
      ))
    }
  </section>
</Layout>
