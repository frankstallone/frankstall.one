/*
POST block layout using container queries
– Sidebar stacks above content by DOM order on narrow viewports
– At a single container threshold, the row flips so the sidebar sits on the right
– Borders switch in sync with that threshold (bottom → left)
Reference: https://piccalil.li/blog/building-a-breakout-element-with-container-units/
*/

.post {
  --post-sidebar-border-color: #676cc8; /* Indigo 600 */
  /* Single container threshold that controls both the layout flip and border swap */
  --post-inline-threshold: 52rem;

  /* Enable container queries & units */
  container-type: inline-size;
}

/* At/above the threshold, flip the row so the sidebar appears on the right.
   Sidebar remains first in the DOM, so on narrow it stacks above the content. */
@container (min-width: var(--post-inline-threshold, 52rem)) {
  /* Inline layout: force sidebar to the right */
  .post .post__row {
    flex-direction: row-reverse;
  }
}

/* Optional: breakout element support inside the post */
.post__breakout {
  width: 100cqi;
}

/* Sidebar border: bottom when stacked (sidebar on top) */
.post .post__sidebar {
  border: 0;
  border-block-end: 2px solid var(--post-sidebar-border-color);
}

/* Sidebar border: left when inline (sidebar on right); remove bottom */
@container (min-width: var(--post-inline-threshold, 52rem)) {
  .post .post__sidebar {
    border-block-end: 0;
    border-inline-start: 2px solid var(--post-sidebar-border-color);
  }
}
